{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Movers and Packers (part 3/5){% endblock %}</h1>
<h2>{% block subtitle %} Collect Latent States{% endblock %}</h2>
<div class="explanation">
  <p>Collect user's latent states - Session: {{session_name}} - Total Steps: {{session_length}}</p>
</div>
{% endblock %}

{% block content %}

<script src="//code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
  integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
  crossorigin="anonymous"></script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('exp1.static', filename='methods.js') }}"></script>
<script type="text/javascript" charset="utf-8"
  src="{{ url_for('exp1.static', filename='exp1_game_logic_new.js') }}"></script>
<script type="text/javascript">

  page_list = [];
  page_list.push(new PageDuringGame());

  initGlobalObject(page_list, "together_collect");
</script>

<canvas id="myCanvas" width="900" height="600" style="border:5px solid #000000;" tabindex='1'>
  Your browser does not support the HTML5 canvas tag.
</canvas>

<div class="form-control">
  <label for="latent_state">Select Latent State</label>
  <select name="latent_states" id="latent_states">
    {% for latent_state in latent_states %}
    <option value={{latent_state}}>{{latent_state}}</option>
    {% endfor %}
  </select>

  <div class="wrapper">
    <button type="submit" value="latent_button" id="latent_button">Submit</button>
    <button type="submit" value="next" id="next">Next Step</button>
    <button type="submit" value="prev" id="prev">Previous Step</button>
  </div>
</div>

<div class='form-control'>
  <label for="latent_state">Add Custom Latent State</label>
  <input id="new_latent_state" type='text' placeholder="Custom Latent State">
</div>

<div>
  <div class='form-control'>
    <div>
      <label class="index" for="index"> Enter Index</label>
      <input type="number" name="index" value="0" id="indexValue" min="0" max="{{max_value}}">
    </div>
    <div class="button-center">
      <button type="submit" value="index" id="index">Go to Index</button>
    </div>
  </div>

  <form method="POST">
    <input type="hidden" name="proceed" value="proceed">
    <div class="button-center">
      <button type="submit" value="proceed" id="proceed" {{ is_disabled }}>Proceed to Next Stage</button>
    </div>
  </form>
</div>

<div style="visibility: hidden">
  <div class="button-center">
    <form action="{{ url_for('survey.survey_both_user_random') }}">
      <button type="submit" value="submit" id="submit" {{ is_disabled }}>Proceed to Survey</button>
    </form>
  </div>
</div>

{% endblock %}